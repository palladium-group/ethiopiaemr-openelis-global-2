# OpenELIS-Global-2 Development Guidelines

Auto-generated from all feature plans. Last updated: 2025-11-19

**Constitution**: See `.specify/memory/constitution.md` for non-negotiable
development principles.

## Active Technologies

- Java 21 LTS (OpenJDK/Temurin) - MANDATORY + Spring Boot 3.x, Hibernate 6.x, Jakarta EE 9, React 17, Carbon Design System v1.15, HAPI FHIR R4 v6.6.2 (002-shipment-support)

**OpenELIS Global 3.0 Stack**:

- Backend: Java 21 + Spring Boot 3.x + Hibernate 6.x + JPA + PostgreSQL 14+
- Frontend: React 17 + **Carbon Design System v1.15** (OFFICIAL UI framework)
- FHIR: HAPI FHIR R4 v6.6.2 + IHE mCSD profile
- Testing: JUnit 5 + Mockito (backend), Jest + RTL + Cypress (frontend)
- Build: Maven 3.8+ (backend), npm (frontend), Docker Compose (deployment)

## Project Structure

```text
src/
tests/
```

**OpenELIS Backend Pattern**: `org.openelisglobal.{module}.{layer}`

- Layers: valueholder (JPA entities) → dao (data access) → service (business
  logic) → controller (REST) → form (DTOs)

## Commands

# Add commands for Java 21 LTS (OpenJDK/Temurin) - MANDATORY

**OpenELIS Development Commands**:

```bash
# Backend formatting + build
mvn spotless:apply && mvn clean install -DskipTests -Dmaven.test.skip=true

# Frontend formatting + dev server
cd frontend && npm run format && npm start

# Run E2E tests
cd frontend && npm run cy:run

# Hot reload backend (rebuild + restart container)
mvn clean install -DskipTests && docker compose -f dev.docker-compose.yml up -d --no-deps --force-recreate oe.openelis.org
```

## Code Style

Java 21 LTS (OpenJDK/Temurin) - MANDATORY: Follow standard conventions

**OpenELIS Conventions**:

- **Java**: Use Spotless formatter (`tools/OpenELIS_java_formatter.xml`), NO
  native SQL in code
- **React**: Use Prettier, ALL UI components from `@carbon/react`, ALL strings
  via React Intl
- **FHIR**: Extend `FhirTransformService` for entity↔FHIR conversion, sync via
  `FhirPersistanceService`
- **Database**: Liquibase changesets ONLY (NO direct DDL/DML)
- **Tests**: JUnit 5 for backend, Jest + Cypress for frontend, >70% coverage
  goal

## Recent Changes

- 002-shipment-support: Added Java 21 LTS (OpenJDK/Temurin) - MANDATORY + Spring Boot 3.x, Hibernate 6.x, Jakarta EE 9, React 17, Carbon Design System v1.15, HAPI FHIR R4 v6.6.2

<!-- MANUAL ADDITIONS START -->
<!-- MANUAL ADDITIONS END -->
